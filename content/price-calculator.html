<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>L2 & B2 Flavors – Lagring Boot & Extra</title>
  <!-- Exempeltypsnitt och font-awesome -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link
    href="https://fonts.googleapis.com/css2?family=Hind:wght@300;600&family=Montserrat:wght@400;600&display=swap"
    rel="stylesheet"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-2yEmk2w8kVWD3su2tJTXG+VwVXuTRI3WSrQJic+VQkDwCjmwBgF82ZC3AV5W46i0YWFNfXrPE3J7NDQKQ5C1hw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <style>
    /* Reset och grundläggande styling */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Montserrat', sans-serif;
      background: #f4f7f9;
      color: #333;
      padding: 20px;
    }
    h1 {
      text-align: center;
      font-family: 'Hind', sans-serif;
      font-weight: 300;
      color: #00509e;
      margin-bottom: 30px;
    }

    /* Bordets layout */
    .flavor-table {
      width: 100%;
      border-collapse: collapse;
      margin: 0 auto;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .flavor-table thead {
      background: #e9f5ff;
    }
    .flavor-table th,
    .flavor-table td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid #dbe7f0;
      font-size: 0.9rem;
    }
    .flavor-table th {
      font-family: 'Hind', sans-serif;
      font-weight: 300;
      color: #00509e;
      white-space: nowrap;
    }
    .flavor-table td {
      font-family: 'Montserrat', sans-serif;
      color: #555;
      vertical-align: middle;
    }
    .flavor-table tbody tr:hover {
      background: #f0f8ff;
    }

    /* Inputs och switchar */
    input[type="number"] {
      width: 60px;
      padding: 5px;
      font-size: 0.9rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      text-align: center;
      outline: none;
    }
    input[type="number"]:focus {
      border-color: #66afe9;
    }
    .extra-storage-input {
      width: 70px;
    }
    /* Switch för fast/large */
    .switch-container {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
    }
    .switch-container label {
      font-size: 0.8rem;
      color: #777;
    }
    .switch-toggle {
      position: relative;
      width: 38px;
      height: 20px;
      background: #ccc;
      border-radius: 20px;
      cursor: pointer;
      -webkit-appearance: none;
      outline: none;
      transition: background 0.3s ease;
    }
    .switch-toggle::after {
      content: "";
      position: absolute;
      top: 1px;
      left: 1px;
      width: 18px;
      height: 18px;
      background: #fff;
      border-radius: 50%;
      transition: transform 0.3s ease;
    }
    .switch-toggle:checked {
      background: #007acc;
    }
    .switch-toggle:checked::after {
      transform: translateX(18px);
    }

    /* Knappar */
    .deleteRowBtn {
      background: #e74c3c;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      padding: 4px 8px;
      font-size: 0.8rem;
    }
    .deleteRowBtn:hover {
      background: #c0392b;
    }
    /* Rubriker i kolumnerna */
    .boot-col {
      background: #e6f1f7;
      color: #0077b6;
      font-weight: 600;
    }
    .extra-col {
      background: #d7eef7;
      color: #0077b6;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <h1>L2 & B2 Flavors – Lagring Boot & Extra</h1>

  <table class="flavor-table" id="flavorTable">
    <thead>
      <tr>
        <th>Flavor</th>
        <th>vCPU</th>
        <th>RAM (GB)</th>
        <th class="boot-col">Lagring GB Boot Disk</th>
        <th class="extra-col">Lagring GB Extra</th>
        <th>Fast / Large</th>
        <th>Antal</th>
        <th>Pris/instans</th>
        <th>Ta bort</th>
      </tr>
    </thead>
    <tbody id="flavorTbody"></tbody>
  </table>

  <script>
    /********************************************
     * Priser för blocklagring
     * Boot-lagring för B2 = Alltid "fast" (3.60 kr/GB)
     * Extra-lagring = Välj "fast" (3.60 kr/GB) eller "large" (1.20 kr/GB)
     ********************************************/
    const PRICE_FAST = 3.60;
    const PRICE_LARGE = 1.20;

    /********************************************
     * L2 flavors – har en inbyggd lokal disk (NVMe).
     * Denna disk är redan inräknad i flavor-priset.
     * Boot-lagring = flavor.disk (endast visuell, ingen extra kostnad).
     ********************************************/
    const l2Flavours = [
      { id: 'FLAVOR-l2-c2r4-100', name: 'FLAVOR-l2. c2 r4. 100', cpu: 2, ram: 4, disk: 100, basePrice: 480 },
      { id: 'FLAVOR-l2-c2r4-500', name: 'FLAVOR-l2. c2 r4. 500', cpu: 2, ram: 4, disk: 500, basePrice: 880 },
      { id: 'FLAVOR-l2-c2r4-1000', name: 'FLAVOR-l2. c2 r4. 1000', cpu: 2, ram: 4, disk: 1000, basePrice: 1380 },
      { id: 'FLAVOR-l2-c4r8-100', name: 'FLAVOR-l2. c4 r8. 100', cpu: 4, ram: 8, disk: 100, basePrice: 860 },
      { id: 'FLAVOR-l2-c4r8-500', name: 'FLAVOR-l2. c4 r8. 500', cpu: 4, ram: 8, disk: 500, basePrice: 1260 },
      { id: 'FLAVOR-l2-c4r8-1000', name: 'FLAVOR-l2. c4 r8. 1000', cpu: 4, ram: 8, disk: 1000, basePrice: 1760 },
      { id: 'FLAVOR-l2-c8r16-100', name: 'FLAVOR-l2. c8 r16. 100', cpu: 8, ram: 16, disk: 100, basePrice: 1620 },
      { id: 'FLAVOR-l2-c8r16-500', name: 'FLAVOR-l2. c8 r16. 500', cpu: 8, ram: 16, disk: 500, basePrice: 2020 },
      { id: 'FLAVOR-l2-c8r16-1000', name: 'FLAVOR-l2. c8 r16. 1000', cpu: 8, ram: 16, disk: 1000, basePrice: 2520 },
      { id: 'FLAVOR-l2-c16r32-100', name: 'FLAVOR-l2. c16 r32. 100', cpu: 16, ram: 32, disk: 100, basePrice: 3140 },
      { id: 'FLAVOR-l2-c16r32-500', name: 'FLAVOR-l2. c16 r32. 500', cpu: 16, ram: 32, disk: 500, basePrice: 3540 },
      { id: 'FLAVOR-l2-c16r32-1000', name: 'FLAVOR-l2. c16 r32. 1000', cpu: 16, ram: 32, disk: 1000, basePrice: 4040 },
      { id: 'FLAVOR-l2-c16r64-500', name: 'FLAVOR-l2. c16 r64. 500', cpu: 16, ram: 64, disk: 500, basePrice: 5300 },
      { id: 'FLAVOR-l2-c32r64-1000', name: 'FLAVOR-l2. c32 r64.1000', cpu: 32, ram: 64, disk: 1000, basePrice: 7080 },
    ];

    /********************************************
     * B2 flavors – ingen lokal disk.
     * Boot-lagring: användaren matar in GB (alltid fast-lagring = 3.60 kr/GB).
     ********************************************/
    const b2Flavours = [
      { id: 'FLAVOR-b2-c1r2', name: 'FLAVOR-b2. c1 r2', cpu: 1, ram: 2, disk: 0, basePrice: 190 },
      { id: 'FLAVOR-b2-c1r4', name: 'FLAVOR-b2. c1 r4', cpu: 1, ram: 4, disk: 0, basePrice: 300 },
      { id: 'FLAVOR-b2-c2r4', name: 'FLAVOR-b2. c2 r4', cpu: 2, ram: 4, disk: 0, basePrice: 380 },
      { id: 'FLAVOR-b2-c2r8', name: 'FLAVOR-b2. c2 r8', cpu: 2, ram: 8, disk: 0, basePrice: 600 },
      { id: 'FLAVOR-b2-c4r8', name: 'FLAVOR-b2. c4 r8', cpu: 4, ram: 8, disk: 0, basePrice: 760 },
      { id: 'FLAVOR-b2-c4r16', name: 'FLAVOR-b2. c4 r16', cpu: 4, ram: 16, disk: 0, basePrice: 1200 },
      { id: 'FLAVOR-b2-c8r16', name: 'FLAVOR-b2. c8 r16', cpu: 8, ram: 16, disk: 0, basePrice: 1520 },
      { id: 'FLAVOR-b2-c8r32', name: 'FLAVOR-b2. c8 r32', cpu: 8, ram: 32, disk: 0, basePrice: 2400 },
      { id: 'FLAVOR-b2-c16r32', name: 'FLAVOR-b2. c16 r32', cpu: 16, ram: 32, disk: 0, basePrice: 3040 },
      { id: 'FLAVOR-b2-c16r64', name: 'FLAVOR-b2. c16 r64', cpu: 16, ram: 64, disk: 0, basePrice: 4800 },
    ];

    // Kombinera i en array för enkel rendering
    // Ange property "type" = "l2" eller "b2"
    const allFlavours = [
      ...l2Flavours.map(fl => ({ ...fl, type: 'l2' })),
      ...b2Flavours.map(fl => ({ ...fl, type: 'b2' })),
    ];

    // Rendera tabellen
    function renderTable() {
      const tbody = document.getElementById('flavorTbody');
      tbody.innerHTML = '';

      allFlavours.forEach(flavor => {
        const tr = document.createElement('tr');

        // Boot-lagring
        let bootCellContent = '';
        if (flavor.type === 'l2') {
          // L2: visa disk read-only
          bootCellContent = `
            <span style="display:inline-block; min-width:40px;">
              ${flavor.disk}
            </span>
          `;
        } else {
          // B2: användare matar in
          bootCellContent = `
            <input type="number" class="bootInput" value="50" min="0" style="width:60px;" />
          `;
        }

        // Extra-lagring (kolumn) – gäller båda
        // Standard = 0
        let extraCellContent = `
          <input type="number" class="extraInput extra-storage-input" value="0" min="0" />
        `;

        // Switch fast/large
        let switchContent = `
          <div class="switch-container">
            <label>Fast</label>
            <input type="checkbox" class="switch-toggle" />
            <label>Large</label>
          </div>
        `;

        // Bygg rad
        tr.innerHTML = `
          <td>${flavor.name}</td>
          <td>${flavor.cpu}</td>
          <td>${flavor.ram}</td>
          <td class="boot-col">${bootCellContent}</td>
          <td class="extra-col">${extraCellContent}</td>
          <td>${switchContent}</td>
          <td>
            <input type="number" class="qtyInput" value="1" min="1" style="width:50px;" />
          </td>
          <td class="priceCell">0 SEK</td>
          <td>
            <button class="deleteRowBtn">
              <i class="fa-solid fa-trash"></i>
            </button>
          </td>
        `;

        tbody.appendChild(tr);

        // Event-lyssnare
        const qtyEl = tr.querySelector('.qtyInput');
        const bootEl = tr.querySelector('.bootInput');  // kan vara null för l2
        const extraEl = tr.querySelector('.extraInput');
        const toggleEl = tr.querySelector('.switch-toggle');
        const deleteBtn = tr.querySelector('.deleteRowBtn');

        // Recalc varje gång man ändrar
        qtyEl.addEventListener('input', () => recalcRow(tr, flavor));
        if (bootEl) {
          bootEl.addEventListener('input', () => recalcRow(tr, flavor));
        }
        extraEl.addEventListener('input', () => recalcRow(tr, flavor));
        toggleEl.addEventListener('change', () => recalcRow(tr, flavor));
        deleteBtn.addEventListener('click', () => {
          tr.remove();
        });

        // Init beräkning
        recalcRow(tr, flavor);
      });
    }

    // Räkna ut priset för en rad
    function recalcRow(tr, flavor) {
      const qtyEl = tr.querySelector('.qtyInput');
      const priceCell = tr.querySelector('.priceCell');
      const toggleEl = tr.querySelector('.switch-toggle');
      const extraEl = tr.querySelector('.extraInput');

      const qty = parseInt(qtyEl.value) || 0;
      const isLarge = toggleEl.checked; // om true => "large", false => "fast"

      let bootSize = 0;
      // Boot-lagring
      if (flavor.type === 'l2') {
        // L2: boot disk = flavor.disk, redan inräknad i basePrice => ingen extra kostnad
        bootSize = flavor.disk; 
      } else {
        // B2: hämta boot storlek, kostnad = fast-lagring
        const bootEl = tr.querySelector('.bootInput');
        bootSize = parseInt(bootEl.value) || 0;
      }

      // Extra-lagring
      const extraSize = parseInt(extraEl.value) || 0;

      // Beräkna "pris per instans"
      let singlePrice = flavor.basePrice; // CPU+RAM+ev. NVMe (L2)
      if (flavor.type === 'b2') {
        // B2: boot-lagring = always fast
        singlePrice += bootSize * PRICE_FAST;
      }
      // Extra-lagring: toggla fast/large
      const extraCostPerGB = isLarge ? PRICE_LARGE : PRICE_FAST;
      singlePrice += extraSize * extraCostPerGB;

      // Pris total = "pris per instans" * antal
      const totalPrice = singlePrice * qty;
      priceCell.textContent = `${totalPrice.toLocaleString('sv-SE')} SEK`;
    }

    // När sidan laddas
    document.addEventListener('DOMContentLoaded', renderTable);
  </script>
</body>
</html>